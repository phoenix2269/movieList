let movieRepository=function(){let t=[];function e(e){var i;"object"==typeof(i=e)&&"id"in i&&"title"in i?t.push(e):document.write("Input is not a valid object!")}function i(){return t}function n(t){return fetch(`https://imdb-api.com/en/API/Ratings/k_vfofrs3q/${t.id}`).then(function(t){return t.json()}).then(function(e){t.imDb=e.imDb,t.metacritic=e.metacritic,t.theMovieDb=e.theMovieDb,t.rottenTomatoes=e.rottenTomatoes}).catch(function(t){console.error(t)})}return{add:e,getAll:i,addListItem:function t(e){let i=document.querySelector(".movie-list"),o=document.createElement("li"),a=document.createElement("button");o.classList.add("list-group-item"),a.innerText=e.title,a.classList.add("liButton","btn","btn-primary"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#modal-container"),o.appendChild(a),i.appendChild(o),function t(e,i){e.addEventListener("click",function(){!function t(e){n(e).then(function(){modalRepository.showModal(e)})}(i)})}(a,e)},loadList:function t(){return fetch("https://imdb-api.com/en/API/MostPopularMovies/k_vfofrs3q").then(function(t){return t.json()}).then(function(t){t.items.forEach(function(t){e({id:t.id,title:t.title,imageUrl:t.image,year:t.year,rank:t.rank})})}).catch(function(t){console.error(t)})},loadDetails:n}}(),modalRepository=function(){let t=document.querySelector("#modal-container"),e=window.$;function i(){e(".modal-title").empty(),e(".modal-body").empty(),e(".modal-footer").empty(),t.classList.remove("is-visible")}return window.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("is-visible")&&i()}),{showModal:function t(i){let n=e(".modal-body"),o=e(".modal-title");o.empty(),n.empty();let a=e("<h1>"+i.title+"</h1>"),r=e("<p>Year : "+i.year+"</p>"),c=e("<p>Rank : "+i.rank+"</p>"),s=e('<img class="modal-img" style="width:50%">');s.attr("src",i.imageUrl);let l=e("<p>imDb Rating : "+i.imDb+"</p>"),p=e("<p>Metacritic Rating : "+i.metacritic+"</p>"),d=e("<p>theMovieDb Rating : "+i.theMovieDb+"</p>"),m=e("<p>RottenTomatoes : "+i.rottenTomatoes+"</p>");o.append(a),n.append(r),n.append(c),n.append(s),n.append(l),n.append(p),n.append(d),n.append(m)},hideModal:i}}();movieRepository.loadList().then(function(){movieRepository.getAll().forEach(function(t){movieRepository.addListItem(t)})});